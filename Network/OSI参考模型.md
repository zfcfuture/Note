## OSI参考模型

对于计算机网络而言，不可不提的就是网络协议，它为网络中数据的传输提供了根本的保障。经验告诉我们，为了降低复杂度和提高灵活性，大型项目一般都会采用分层的策略，网络通信作为一个庞大的系统工程，自然也会遵守这种规律。于是国际标准化组织提出了经典的`开放式系统互联模型`（ *open system interconnection model* ），简称 `OSI模型`

OSI模型共分为7层，自下而上分别为：物理层、数据链路层、网络层、传输层、会话层、表示层以及应用层

然而只是记住这些名称没有任何意义，我们需要了解每一层具体的意义

### 1.  物理层

两台设备之间要想实现数据传输，最底层依靠的还是由0和1组成的比特流。这就有了我们的第一个要求，如何传输比特流？物理层就起到了这个作用，例如对于一根光缆，我们只需要构建出高低电平与`0/1`比特的对应关系，我们就可以构建出一个比特流信道

所以物理层通过对通信设备以及通信媒介进行封装，从而屏蔽物理设备的底层细节。于是在物理层规范下，借助物理介质，相邻的两台设备可以实现比特流的传输

### 2.  数据链路层

一般情况下，网络中的物理介质不可能只为两台设备服务，它通常是被多台参与通信的设备所共享的，尤其是在本地网络中。这就导致了一个问题，多台设备参与通信的情况下，其中一台设备发出了数据该由谁来接收，即网络寻址问题

于是在数据链路层对传输的数据进行了一个更高维度的封装，引入了一个新的概念——`帧`（ *frame* ）

帧中除了发送的数据外，还包括了`地址信息`以及`校验和`

其它参与通信的设备收到帧后，会对帧头部中的地址信息进行判断，检查是否是发送给自己的。如果借助二级网络设备，如交换机，就可以根据帧头中的地址信息精准的转发到接收方。

于是在数据链路层规范下，依靠帧作为传输单元，可以实现局域网内的通信

### 3.  网络层

在数据链路层下，数据只能在单个局域网内实现传输，如果想要在更大范围的网络内实现数据传输（例如多个局域网组成的更复杂的网络），就需要对数据进行更高一个维度的封装，于是又引入了一个新的概念——`包`（ packet ）

网络层通过**数据包**作为基本传输单元，可以实现`路径选择`与`数据包转发`

这样在网络层就可以实现跨局域网通信，即全网通信的能力。数据在局域网内依赖数据链路层实现通信，跨局域网涉及到路由选择，由网络层负责，二者协同工作，分工明确

### 4.  传输层

在网络层下，数据可以完成点到点传输（设备之间的数据传输），但是在一台通信设备下（如个人PC）往往包含着多个应用进程，为此传输层引入了 `端口` 的概念，实现了从进程到进程的传输能力

这里同样选择对数据进行更高维度的封装，引入了`段`的概念，段在包的基础之上保存了端口等控制信息，依靠段信息，目标节点就可根据端口号取出数据发送到目标进程

### 5.  会话层

现行的协议栈没有实现独立的会话层，该层的功能由应用层承担，不再赘述

### 6.  表示层

现行的协议栈没有实现独立的表示层，该层的功能由应用层承担，不再赘述

### 7.  应用层

传输层提供了一般化的进程间通信能力，将无差别的数据，传输到目标进程。进程提供的网络服务多种多样，每种应用都有自己的一套通信规则，这就是应用层负责的范畴

例如访问 Web 服务时，客户端需要根据 Web 应用协议，向服务端发请求；服务端则根据 Web 应用协议解析请求、处理请求并向客户端回复响应；请求和响应都要符合 Web 应用协议，才能被通信双方所理解

网络应用琳琅满目，因此应用层协议也是种类繁多

## 小结

- 物理层：在物理介质之上，实现比特传输
- 数据链路层：在物理层之上，实现局域网通信
- 网络层：在数据链路层之上，实现全网节点与节点间的通信（点到点）
- 传输层：在网络层之上，实现进程到进程的通信（端到端）
- 会话层：设计构想，并未独立实现，实际上归于应用层
- 表示层：设计构想，并未独立实现，实际上归于应用层
- 应用层：负责具体网络应用的通信逻辑

































